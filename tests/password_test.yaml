suite: test stratos metrics password config
templates:
  - deployment.yaml
tests:
  - it: should have default username and password
    asserts:
      - equal:
          path: spec.template.spec.containers[0].env
          value:
          - name: USERNAME
            value: "metrics"
          - name: PASSWORD
            value: "s3cr3t"
  - it: should allow username and password to be changed
    set:
      nginx.username: test_user
      nginx.password: test_password
    asserts:
      - equal:
          path: spec.template.spec.containers[0].env
          value:
          - name: USERNAME
            value: "test_user"
          - name: PASSWORD
            value: "test_password"
  - it: should allow username and password to be changed (new values)
    set:
      metrics.username: test_user
      metrics.password: test_password
    asserts:
      - equal:
          path: spec.template.spec.containers[0].env
          value:
          - name: USERNAME
            value: "test_user"
          - name: PASSWORD
            value: "test_password"
